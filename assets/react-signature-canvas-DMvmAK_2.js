import{a as m,m as h,b as P,f as _,i as C,_ as w}from"./@babel-BVDyanKE.js";import{P as a}from"./prop-types-D2f4Tpnk.js";import{a as R,r as S}from"./react-BA-y5DQ0.js";import{S as z}from"./signature_pad-CT7xMktM.js";import{t as x}from"./trim-canvas-Dmv0tWmu.js";var O=["canvasProps","clearOnResize"],u=function(g){m(i,g);var c=h(i);function i(){var e;_(this,i);for(var f=arguments.length,d=new Array(f),o=0;o<f;o++)d[o]=arguments[o];return e=c.call.apply(c,[this].concat(d)),e.staticThis=e.constructor,e._sigPad=null,e._canvas=null,e.setRef=function(n){e._canvas=n,e._canvas===null&&(e._sigPad=null)},e._excludeOurProps=function(){var n=e.props;n.canvasProps,n.clearOnResize;var t=C(n,O);return t},e.componentDidMount=function(){var n=e.getCanvas();e._sigPad=new z(n,e._excludeOurProps()),e._resizeCanvas(),e.on()},e.componentWillUnmount=function(){e.off()},e.componentDidUpdate=function(){Object.assign(e._sigPad,e._excludeOurProps())},e.getCanvas=function(){if(e._canvas===null)throw e.staticThis.refNullError;return e._canvas},e.getTrimmedCanvas=function(){var n=e.getCanvas(),t=document.createElement("canvas");return t.width=n.width,t.height=n.height,t.getContext("2d").drawImage(n,0,0),x(t)},e.getSignaturePad=function(){if(e._sigPad===null)throw e.staticThis.refNullError;return e._sigPad},e._checkClearOnResize=function(){e.props.clearOnResize&&e._resizeCanvas()},e._resizeCanvas=function(){var n,t,l=(n=e.props.canvasProps)!==null&&n!==void 0?n:{},p=l.width,v=l.height;if(!(typeof p<"u"&&typeof v<"u")){var r=e.getCanvas(),s=Math.max((t=window.devicePixelRatio)!==null&&t!==void 0?t:1,1);typeof p>"u"&&(r.width=r.offsetWidth*s),typeof v>"u"&&(r.height=r.offsetHeight*s),r.getContext("2d").scale(s,s),e.clear()}},e.render=function(){var n=e.props.canvasProps;return R.createElement("canvas",w({ref:e.setRef},n))},e.on=function(){return window.addEventListener("resize",e._checkClearOnResize),e.getSignaturePad().on()},e.off=function(){return window.removeEventListener("resize",e._checkClearOnResize),e.getSignaturePad().off()},e.clear=function(){return e.getSignaturePad().clear()},e.isEmpty=function(){return e.getSignaturePad().isEmpty()},e.fromDataURL=function(n,t){return e.getSignaturePad().fromDataURL(n,t)},e.toDataURL=function(n,t){return e.getSignaturePad().toDataURL(n,t)},e.fromData=function(n){return e.getSignaturePad().fromData(n)},e.toData=function(){return e.getSignaturePad().toData()},e}return P(i)}(S.Component);u.propTypes={velocityFilterWeight:a.number,minWidth:a.number,maxWidth:a.number,minDistance:a.number,dotSize:a.oneOfType([a.number,a.func]),penColor:a.string,throttle:a.number,onEnd:a.func,onBegin:a.func,canvasProps:a.object,clearOnResize:a.bool};u.defaultProps={clearOnResize:!0};u.refNullError=new Error("react-signature-canvas is currently mounting or unmounting: React refs are null during this phase.");export{u as S};
